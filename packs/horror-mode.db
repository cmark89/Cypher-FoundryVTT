{"name":"Horror Level: Escalate","permission":{"default":0,"1xEJYK4q75UixwJ0":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"/*\r\n * This macro increases the horror level by 1\r\n */\r\n\r\n// Give an error if Horror Mode is already active\r\nif(!CONFIG.CYPHER.HorrorMode.isActive) {\r\n\treturn ui.notifications.warn(`Horror Mode must be active to escalate the Horror Level!`);\r\n}\r\n\r\n// Give an error if Horror Level is already 20\r\nif(!CONFIG.CYPHER.HorrorMode.horrorLevel >= 20) {\r\n\treturn ui.notifications.warn(`Horror Mode is already 20! Aborting macro.`);\r\n}\r\n\r\n// Otherwise, escalate the horror!\r\nCONFIG.CYPHER.HorrorMode.escalate();\r\n\r\n// And display a text message.\r\n\r\nlet horrorLevel = CONFIG.CYPHER.HorrorMode.horrorLevel;\r\nlet text = 'The Horror Level escalates to ' + horrorLevel + \"!\";\r\nlet content = '<p><span class=\"cypher-message-horror-mode\">' + text + '</span></p>';\r\nChatMessage.create({\r\n  speaker: ChatMessage.getSpeaker(),\r\n  content: content ,\r\n  type: CONST.CHAT_MESSAGE_TYPES.OTHER\r\n});\r\n\r\n// Broadcast the update to all clients\r\nCONFIG.CYPHER.HorrorMode.broadcastUpdate();\r\n\r\n// Show a GM notification\r\nreturn ui.notifications.notify(`Horror Level has escalated to ` + horrorLevel);","author":"1xEJYK4q75UixwJ0","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"6ZLwm3sZS7TjiuEk"}
{"name":"Horror Mode: Turn Off","permission":{"default":0,"1xEJYK4q75UixwJ0":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"/*\r\n * This macro deactivates horror mode.\r\n * Note that it does not change the horror level (use the Reset macro for that).\r\n */\r\n\r\n// Give an error if Horror Mode is already active\r\nif(!CONFIG.CYPHER.HorrorMode.isActive) {\r\n\treturn ui.notifications.warn(`Horror mode already inactive! Aborting deactivation macro.`);\r\n}\r\n\r\n// Otherwise, set the flag to true\r\nCONFIG.CYPHER.HorrorMode.setActive(false);\r\n\r\n// And display a text message.\r\nlet text = 'The horror recedes...';\r\nlet content = '<p><span class=\"cypher-message-horror-mode\">' + text + '</span></p>';\r\nChatMessage.create({\r\n  speaker: ChatMessage.getSpeaker(),\r\n  content: content ,\r\n  type: CONST.CHAT_MESSAGE_TYPES.OTHER\r\n});\r\n\r\n// Broadcast update to all players\r\nCONFIG.CYPHER.HorrorMode.broadcastUpdate();\r\n\r\n// Show a GM notification\r\nlet horrorLevel = CONFIG.CYPHER.HorrorMode.horrorLevel;\r\nreturn ui.notifications.notify(`Horror mode deactivated! Use the Reset Horror Level macro to reset the horror level to 1, otherwise it will remain at ` + horrorLevel);","author":"1xEJYK4q75UixwJ0","img":"icons/svg/unconscious.svg","actorIds":[],"_id":"WGykjnBCBnvjB0fI"}
{"name":"Horror Mode: Reset","permission":{"default":0,"1xEJYK4q75UixwJ0":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"/*\r\n * This macro resets the horror level to 1. It does not alter the active state\r\n */\r\n\r\n // Reset the horror level\r\nCONFIG.CYPHER.HorrorMode.reset();\r\n\r\n// Broadcast an update to connected clients\r\nCONFIG.CYPHER.HorrorMode.broadcastUpdate();\r\n\r\n// Show a notification to the GM\r\nui.notifications.notify(\"Horror Level reset to 1.\");","author":"1xEJYK4q75UixwJ0","img":"icons/svg/wall-direction.svg","actorIds":[],"_id":"aQFi0hwHBpHwzm2N"}
{"name":"Horror Mode: Status","permission":{"default":0,"1xEJYK4q75UixwJ0":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"/*\r\n * This macro shows a notification of the current on/off status of Horror Mode as well as the horror level.\r\n * Calling this macro will also forcibly synchronize all clients, making it useful to ensure all clients are \r\n * running on the proper horror level if, for example, reconnections occur during gameplay\r\n */\r\n\r\n// Show a reminder toast!\r\nlet active = CONFIG.CYPHER.HorrorMode.isActive;\r\nlet level = CONFIG.CYPHER.HorrorMode.horrorLevel;\r\nreturn ui.notifications.notify(`Horror mode is currently ` +\r\n(active ? \"active\" : \"inactive\") + `, and the horror level is ` + level);\r\n\r\n// Sync with the clients\r\nCONFIG.CYPHER.HorrorMode.broadcastUpdate();\r\n","author":"1xEJYK4q75UixwJ0","img":"icons/svg/clockwork.svg","actorIds":[],"_id":"cbZ5rTPsxal207QZ"}
{"name":"Horror Mode: Turn On","permission":{"default":0,"1xEJYK4q75UixwJ0":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"/*\r\n * This macro activates horror mode, allowing for escalating GM intrusions. \r\n */\r\n\r\n// Give an error if Horror Mode is already active\r\nif(CONFIG.CYPHER.HorrorMode.isActive) {\r\n\treturn ui.notifications.warn(`Horror mode already active. Aborting activation macro.`);\r\n}\r\n\r\n// Otherwise, set the flag to true\r\nCONFIG.CYPHER.HorrorMode.setActive(true);\r\n\r\n// And display a text message. // TODO: Load it from config instead of just slamming it in here.\r\nlet text = `Unspeakable horror approaches!`;\r\nlet content = '<p><span class=\"cypher-message-horror-mode\">' + text + '</span></p>';\r\nChatMessage.create({\r\n  speaker: ChatMessage.getSpeaker(),\r\n  content: content ,\r\n  type: CONST.CHAT_MESSAGE_TYPES.OTHER\r\n});\r\n\r\n// Broadcast the update to all players\r\nCONFIG.CYPHER.HorrorMode.broadcastUpdate();\r\n\r\n// Show a notification to the GM\r\nlet horrorLevel = CONFIG.CYPHER.HorrorMode.horrorLevel;\r\nreturn ui.notifications.notify(`Horror mode activated! Current Horror Level: ` + horrorLevel);","author":"1xEJYK4q75UixwJ0","img":"systems/cypher/graphics/icons/eye.svg","actorIds":[],"_id":"q2lIPSZyXjHnNWNh"}
